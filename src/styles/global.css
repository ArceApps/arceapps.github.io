@import "tailwindcss";
@plugin "@tailwindcss/typography";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  /* Brand Colors */
  --color-primary: #018786; /* Teal */
  --color-secondary: #FF9800; /* Orange */

  /* Material Design Colors */
  --color-surface: #FFFFFF;
  --color-surface-variant: #F4F5F7;
  --color-on-surface: #1C1B1F;
  --color-on-surface-variant: #49454F;

  /* Dark Mode Colors */
  --color-dark-surface: #121212;
  --color-dark-surface-variant: #1C1C1E;
  --color-dark-on-surface: #E6E1E5;
  --color-dark-on-surface-variant: #CAC4D0;

  /* Fonts */
  --font-sans: 'Inter Variable', 'Inter', system-ui, -apple-system, sans-serif;
  --font-heading: 'Merriweather', 'Inter Variable', 'Inter', system-ui, serif;
}

/* Material Design 3 Utilities */
@layer utilities {
  .elevation-1 {
    box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15), 0px 1px 2px 0px rgba(0, 0, 0, 0.30);
  }
  .elevation-2 {
    box-shadow: 0px 2px 6px 2px rgba(0, 0, 0, 0.15), 0px 1px 2px 0px rgba(0, 0, 0, 0.30);
  }
  .elevation-3 {
    box-shadow: 0px 4px 8px 3px rgba(0, 0, 0, 0.15), 0px 1px 3px 0px rgba(0, 0, 0, 0.30);
  }

  .material-card {
    @apply rounded-xl bg-surface dark:bg-dark-surface-variant border border-gray-200 dark:border-gray-800 transition-all duration-300;
  }

  .cv-auto {
    content-visibility: auto;
  }
}

/* Material Icons Class */
.material-icons {
  font-family: 'Material Icons';
  font-weight: normal;
  font-style: normal;
  font-size: 24px;  /* Preferred icon size */
  display: inline-block;
  line-height: 1;
  text-transform: none;
  letter-spacing: normal;
  word-wrap: normal;
  white-space: nowrap;
  direction: ltr;
  /* Support for all WebKit browsers. */
  -webkit-font-smoothing: antialiased;
  /* Support for Safari and Chrome. */
  text-rendering: optimizeLegibility;
  /* Support for Firefox. */
  -moz-osx-font-smoothing: grayscale;
  /* Support for IE. */
  font-feature-settings: 'liga';
}

/* Base Styles */
html {
  @apply scroll-smooth;
}

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto !important;
  }
}

body {
  @apply bg-surface dark:bg-dark-surface text-on-surface dark:text-dark-on-surface antialiased transition-colors duration-300;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
  @apply font-heading font-medium tracking-tight;
}

/* Prose Customization */
@layer components {
  .prose {
    /* Base Color & Typography */
    @apply text-on-surface-variant dark:text-gray-200 leading-relaxed;

    /* Global Heading Styles */
    @apply prose-headings:font-heading prose-headings:text-primary dark:prose-headings:text-gray-50 prose-headings:font-bold prose-headings:tracking-tight;
  }

  /* Specific Heading Sizes & Spacing */
  .prose h1 {
    @apply text-4xl mb-8 mt-12;
  }
  .prose h2 {
    @apply text-3xl mb-6 mt-10;
  }
  .prose h3 {
    @apply text-2xl mb-4 mt-8;
  }
  .prose h4 {
    @apply text-xl mb-4 mt-6;
  }

  /* Paragraphs */
  .prose p {
    @apply my-6 text-lg leading-8;
  }

  /* Links */
  .prose a {
    @apply text-primary dark:text-teal-300 font-semibold no-underline transition-colors;
  }
  .prose a:hover {
    @apply text-secondary underline;
  }

  /* Strong */
  .prose strong {
    @apply text-on-surface dark:text-gray-50 font-bold;
  }

  /* Code (Inline) */
  .prose code {
    @apply text-secondary dark:text-secondary bg-surface-variant dark:bg-gray-800 px-1.5 py-0.5 rounded font-mono text-sm;
  }
  .prose code::before, .prose code::after {
    content: none;
  }

  /* Pre (Code Blocks) */
  .prose pre {
    @apply bg-[#1e1e1e] dark:bg-[#1a1a1a] text-gray-100 rounded-2xl shadow-xl border border-gray-700 dark:border-gray-600 p-6 my-8 overflow-x-auto;
    position: relative; /* For copy button */
  }

  /* Blockquotes */
  .prose blockquote {
    @apply border-l-4 border-primary bg-surface-variant/30 dark:bg-dark-surface-variant/30 py-4 pl-6 pr-4 my-8 rounded-r-xl not-italic font-serif text-lg text-on-surface dark:text-gray-100;
  }

  /* Images */
  .prose img {
    @apply rounded-2xl shadow-lg my-10;
  }

  /* Lists */
  .prose ul, .prose ol {
    @apply my-6;
  }
  .prose li {
    @apply my-2;
  }
  .prose li::marker {
    @apply text-primary;
  }

  /* HR */
  .prose hr {
    @apply border-gray-200 dark:border-gray-800 my-12;
  }

  /* Copy Button Styles */
  .copy-code-btn {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    padding: 0.35rem;
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 0.5rem;
    color: #e5e7eb;
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0; /* Hidden by default */
  }

  /* Show copy button on hover */
  .prose pre:hover .copy-code-btn,
  .copy-code-btn:focus-visible {
    opacity: 1;
  }

  .copy-code-btn:hover {
    background-color: rgba(255, 255, 255, 0.2);
    color: white;
    transform: scale(1.05);
  }

  .copy-code-btn:active {
    transform: scale(0.95);
  }

  .copy-code-btn .material-icons {
    font-size: 1.25rem;
  }
}

/* Animations */
@keyframes fade-in-up {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes scale-progress {
  from { transform: scaleX(0); }
  to { transform: scaleX(1); }
}

.scroll-progress-bar {
  transform: scaleX(0);
}

@media (prefers-reduced-motion: no-preference) {
  .fade-in {
    animation: fade-in-up 0.5s ease-out forwards;
  }

  /* Scroll-Driven Animations */
  @supports (animation-timeline: view()) {
    .fade-in-section {
      animation: fade-in-up linear both;
      animation-timeline: view();
      animation-range: entry 10% cover 30%;
    }
  }

  @supports (animation-timeline: scroll()) {
    .scroll-progress-bar {
      animation: scale-progress linear;
      animation-timeline: scroll();
    }
  }
}
